<!DOCTYPE html>
<html>
  <head>
    <title>MOB OWLSKETCHHHH</title>
  </head>
  <body>
  	<input type="text" placeholder="Enter code here" id="codeInput"/>
	<button type="button" onclick="submitCode();">Submit</button>

	<script src="/socket.io/socket.io.js"></script>
	<script>
		var socket = io();
		var socketID = -999;
		socket.emit("identify", {source: "mobile"});

		//the two ways to accept the code input
		function submitCode() {
			var data = document.getElementById("codeInput");
			//get element codeInput and return code value
			socket.emit("confirm", {source: "mobile", code: data.value});
		}

		socket.on("wrongCode", function() {
			var newDiv = document.createElement("div");
			var newContent = document.createTextNode("WHOOPS, wrong code!");
			newDiv.appendChild(newContent);
			document.body.appendChild(newDiv);
		});

		socket.on("rightCode", function(data) {
			socketID = data.socket;
		});

		window.setInterval(function() {
			if(!(socketID === -999)) {
				socket.emit("accelInfo", {socket: socketID, message: "HOLA MUNDO!"});
			}
		}, 34);

			
	</script>
  </body>
</html>
