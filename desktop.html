<!DOCTYPE html>
<html>
  <head>
    <title>DESK OWLSKETCHHHH</title>
	<link rel="stylesheet" type="text/css" href="css/main.css"> 
	<script src="./js/three.js"></script>
  </head>
  <body>
	<script src="/socket.io/socket.io.js"></script>
	<script>
		var socket = io();
		var motiones = {};
		motiones.ax = 0.0;
		motiones.ay = 0.0;
		motiones.az = 0.0;

		socket.emit("identify", {source: "desktop"});

		socket.on("uniqueCode", function(returnCode) {
			var newDiv = document.createElement("div");
			var newContent = document.createTextNode(returnCode.code);
			newDiv.appendChild(newContent);
			newDiv.id = "code";
			document.body.appendChild(newDiv);
			//need to fix this element to the top
		});

		socket.on("accelMessage", function(data) {
			//console.log(motion);
			motiones.ax = data.motion.ax;
			motiones.ay = data.motion.ay;
			motiones.az = data.motion.az;
		});
	</script>

	<script>
			var scene = new THREE.Scene();
			var camera = new THREE.PerspectiveCamera( 75, window.innerWidth/window.innerHeight, 0.1, 1000 );

			var renderer = new THREE.WebGLRenderer({alpha: true});
			renderer.setSize( window.innerWidth, window.innerHeight );
			document.body.appendChild( renderer.domElement );

			var geometry = new THREE.BoxGeometry( 1, 1, 1 );
			var material = new THREE.MeshNormalMaterial();
			var cube = new THREE.Mesh( geometry, material );
			scene.add( cube );

			camera.position.z = 5;

			var render = function () {
				requestAnimationFrame( render );

				if(motiones.az > 0) {
					cube.rotation.x = motiones.ay/6;
				}
				else {
					cube.rotation.x = -(motiones.ay/6);
				}
				if(motiones.az > 0) {
					cube.rotation.z = motiones.ax/6;
				}
				else {
					cube.rotation.z = -(motiones.ax/6);
				}
				renderer.render(scene, camera);
			};

			render();

	</script>

  </body>
</html>
